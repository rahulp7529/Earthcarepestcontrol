"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{16797:function(e,t,r){r.d(t,{H:function(){return c}});var i=r(85893),a=r(67294),n=r(5266),s=r(2337),o=r(94623),d=r(69306),l=r(30506);function c(e){let{className:t}=e,r=(0,d.c0)(768),c=(0,a.useMemo)(()=>{let e=Array(50).fill(0).map(()=>({width:Math.floor(100*Math.random()+100),height:Math.floor(100*Math.random()+100)}));return r?e.slice(0,10):e},[r]);return(0,i.jsx)(n.ZP,{columnsCountBreakPoints:o.F,className:t,children:(0,i.jsx)(s.Z,{gutter:"4px",children:c.map((e,t)=>(0,i.jsx)(l.O,{className:"aspect-square w-full rounded-lg",style:{aspectRatio:e.width/e.height}},t))})})}},80683:function(e,t,r){r.r(t),r.d(t,{__N_SSP:function(){return R},default:function(){return z}});var i=r(85893),a=r(67294),n=r(9008),s=r.n(n),o=r(94623),d=r(8891),l=r.n(d),c=r(12878),u=r(77428),p=r(59820),m=r(69306),h=r(62363),f=r(62469),g=r(1233),x=r(35893),j=r(2113),y=r(14319),v=r(88361),k=r(41664),C=r.n(k),b=r(47922);function w(e){let{tabs:t,activeTabId:r}=e,n=(0,b.y)("optimize-feed-tabs"),[s,o]=a.useState(r),d=n?s:r,l=(0,m.c0)(768);a.useEffect(()=>{r!==d&&o(r)},[r]);let c=(0,a.useMemo)(()=>t.filter(e=>e?.id==="top"||e?.id==="rising"),[t]),u=a.useRef(null),p=(0,a.useCallback)(e=>{u.current&&l&&e.currentTarget&&"offsetLeft"in e.currentTarget&&u.current.scrollTo({left:e.currentTarget?.offsetLeft,behavior:"smooth"})},[l,u]),h=(0,a.useCallback)((e,t)=>{p(e),o(t)},[p]),f=t.find(e=>e?.id==="daily-theme");return(0,i.jsx)("div",{ref:u,className:(0,g.cn)("overflow-x-auto scrollbar-hide max-md:snap-x scroll-px-3","scroll-px-4 snap-x"),children:(0,i.jsxs)("div",{ref:u,className:(0,g.cn)("gap-3 max-md:gap-6 flex md:px-10 mt-3 md:mt-4 md:pb-4 transition-all duration-300","px-4 md:px-4 py-4 mt-0 md:mt-0"),children:[c&&(0,i.jsx)(P,{tabs:c,onSelect:(e,t)=>h(t,e),activeTabId:d}),f&&(0,i.jsx)(N,{className:f.hidden?"hidden":"",isActive:f.id===d,activeTabId:d,title:f.name,renderBefore:f.icon,onClick:e=>h(e,f.id),url:f.url},f.name),t.map(e=>e&&e?.id!=="daily-theme"&&e?.id!=="rising"&&e?.id!=="top"?(0,i.jsx)(N,{className:e.hidden?"hidden":"",isActive:e.id===d,activeTabId:d,title:e.name,renderBefore:e.icon,onClick:t=>h(t,e.id),url:e.url},e.name):null)]})})}function P(e){let t=(0,b.y)("disabled-background-scroll-for-modals"),r=(0,m.OV)("xs"),a="top"===e.activeTabId||"rising"===e.activeTabId,n=e.tabs.find(e=>"top"===e.id),s=e.tabs.find(e=>"rising"===e.id),o="top"===e.activeTabId?n:s;if(!o||!n||!s)return null;let d=(0,i.jsxs)(x.bO,{checked:"rising"===e.activeTabId,className:"pl-2 justify-between",onSelect:t=>e.onSelect("rising",t),withCheckmark:!1,children:[(0,i.jsxs)("span",{className:"flex gap-1 items-center",children:[s.icon," ",s?.name]}),(0,i.jsx)(j.nC,{className:"mr-0.5",children:(0,i.jsx)(f.nQG,{})})]}),l=(0,i.jsxs)(x.bO,{checked:"top"===e.activeTabId,className:"pl-2 justify-between",onSelect:t=>e.onSelect("top",t),withCheckmark:!1,children:[(0,i.jsxs)("span",{className:"flex gap-1 items-center",children:[n.icon," ",n?.name]}),(0,i.jsx)(j.nC,{className:"mr-0.5",children:(0,i.jsx)(f.nQG,{})})]});return(0,i.jsxs)(x.h_,{modal:r||t,children:[(0,i.jsx)(x.$F,{children:(0,i.jsx)(N,{title:o.name,renderBefore:o.icon,isActive:a,onClick:()=>{},activeTabId:e.activeTabId,renderAfter:(0,i.jsx)(h._M,{className:"group-hover:translate-y-0.5 transition-transform ml-auto"}),className:"w-28 pr-2"})}),(0,i.jsxs)(x.AW,{align:"start",style:{minWidth:"150px"},sideOffset:5,alignOffset:-3,children:[(0,i.jsx)(C(),{prefetch:!1,href:s.url,children:d}),(0,i.jsx)(C(),{prefetch:!1,href:n.url,children:l})]})]})}let N=(0,a.forwardRef)((e,t)=>{let{title:r,renderBefore:a,renderAfter:n,className:s,isActive:o,onClick:d,url:l,activeTabId:c,...u}=e,p=(0,i.jsxs)(y.C,{ref:t,size:"lg",onClick:e=>{d&&d(e)},variant:"outline",className:(0,g.cn)("relative cursor-pointer shrink-0 pl-3 snap-start border-none pr-3","bg-transparent border-transparent hover:bg-transparent hover:text-pg-100",o&&"text-pg-100",s),...u,children:[o&&(0,i.jsx)(v.E.span,{layoutId:"selected-tab-indicator",className:"absolute inset-0 bg-pg-600 rounded-full shadow-[inset_0_1px_1px_rgba(0,0,0,0.6)] shadow-pg-400/50",transition:{type:"spring",bounce:.1,duration:.3}}),(0,i.jsxs)("span",{className:"z-10 flex gap-1 items-center w-full",children:[a,r,n]})]});return l?(0,i.jsx)(C(),{prefetch:!1,href:l,className:"shrink-0",children:p}):p});N.displayName="FeedHeaderTab";var _=r(18794),I=r(11163),T=r(26516),L=r(66639);function M(){return(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M4.75 7.75H14.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M4.75 16.25H14.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M4.75 12H19.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}let S={url:"/my-feed",name:"My Feed",icon:(0,i.jsx)(L.Z,{}),id:"my-feed",isCategory:!1},F={id:"rising",url:"/feed",name:"Rising",icon:(0,i.jsx)(function(){return(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M18.2499 14C18.2499 18 15.5 19.25 11.9999 19.25C8 19.25 5.75 16.4 5.75 14C5.75 11.6 7 9.41667 8 8.75C8 11.55 10.6666 13.3333 11.9999 13.25C9.59994 9.65 11.6666 5.66667 12.9999 4.75C12.9999 9.25 18.2499 10 18.2499 14Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})})},{}),isCategory:!1},H={id:"top",url:"/feed?sort=top",name:"Top",icon:(0,i.jsx)(function(){return(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M6.25 8.75H5.75C5.19772 8.75 4.75 9.19772 4.75 9.75V15.25C4.75 15.8023 5.19772 16.25 5.75 16.25H6.25C6.80228 16.25 7.25 15.8023 7.25 15.25V9.75C7.25 9.19772 6.80228 8.75 6.25 8.75Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M12.25 4.75H11.75C11.1977 4.75 10.75 5.19772 10.75 5.75V15.25C10.75 15.8023 11.1977 16.25 11.75 16.25H12.25C12.8023 16.25 13.25 15.8023 13.25 15.25V5.75C13.25 5.19772 12.8023 4.75 12.25 4.75Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M4.75 19.25H19.25",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M18.25 8.75H17.75C17.1977 8.75 16.75 9.19772 16.75 9.75V15.25C16.75 15.8023 17.1977 16.25 17.75 16.25H18.25C18.8023 16.25 19.25 15.8023 19.25 15.25V9.75C19.25 9.19772 18.8023 8.75 18.25 8.75Z",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})},{}),isCategory:!1},A={id:"pure-prompt",url:"/pure-prompt",name:"Pure Prompt",icon:(0,i.jsx)(M,{}),isCategory:!1},W={id:"playground-v3",url:"/playground-v3",name:"Playground v3",icon:(0,i.jsx)(M,{}),isCategory:!1,feature_flag:!0},Z=[F,H,{id:"daily-theme",name:"Daily Theme",url:"/daily-theme",isCategory:!1,icon:(0,i.jsx)(T.f,{})},W,...Object.entries(u.j).map(e=>{let[t,r]=e;return{...r,isCategory:!0}}),S];var $=r(81410),O=r(7109),V=r(16797),B=r(20835),E=r(35852),R=!0;function z(e){let{data:t,initialCursor:r,initialCategory:n,postId:d,image:m,session:h,gamma:f,tabId:x,dailyTheme:j}=e,y=(0,I.useRouter)(),v=(0,a.useCallback)(()=>{let{categoryId:e}=y.query;if(e){let t=(0,u.s)(e);if(t)return Z.find(e=>e.id===t)||F}return Z.find(e=>e.url===y.asPath)||F},[y.query,y.asPath]),k=x?Z.find(e=>e.id===x)||F:0===f?H:Z.find(e=>e.id===n)||F,[C,P]=(0,a.useState)(k),[N,T]=(0,a.useState)({[C.id]:r}),L=v();(0,a.useEffect)(()=>{y.asPath.startsWith("/post/")||C.id===L.id||P(L)},[C.id,L,y.asPath]),(0,a.useEffect)(()=>{l().track("Viewed feed",{tab:C.id})},[C]);let M=(0,_.z0)(),W=(0,_.l6)(),{data:R,isLoading:z}=(0,p.ZP)(["myfeed",h?.user?.id],async()=>{if(!h?.user?.id)return[];try{let e=await fetch(`/api/images/feed?userId=${h.user.id}&isFeed=true`);return(await e.json()).images||[]}catch(e){console.error(e)}return[]},{fallbackData:k.id===S.id?t:[]}),{data:D,isLoading:q}=(0,p.ZP)(["feed",k,h?.user?.id],async()=>{let e={[k.id]:t};return await Promise.all(Z.map(async t=>{if(t.id!==k.id&&t.id!==S.id&&(!t.feature_flag||M)&&(!t.beta_feature_flag||M||W))try{let r=await fetch(`/api/images/risingFeed?category=${t.isCategory?t.id:""}&purePrompt=${t.id===A.id}&model=${{"playground-v2.5":"Playground_v2.5","playground-v3":"Playground_v3"}[t.id]??""}&is_top=${t.id===H.id}&tabId=${t.id}`),{risingImages:i,uniqueImages:a}=await r.json();e[t.id]=[...i,...a];let n=a.at(-1)||null;T(e=>({...e,[t.id]:n&&new Date(n?.createdAt??new Date).getTime()}))}catch(r){console.error(r),e[t.id]=[]}})),e},{fallbackData:{[k.id]:t},revalidateOnFocus:!1}),G=(0,a.useRef)(null),Q=(0,$.C)(),U=Z.filter(e=>!(e.id===S.id&&!h?.user?.id)&&!(e.feature_flag&&!M)&&!(e.beta_feature_flag&&!M&&!W)),J=(0,b.y)("optimize-feed-grid"),K=(0,O.a)(["/feed",...U?.map(e=>e.id)])&&J||C.id!==k.id&&(C.id!==S.id&&q||C.id===S.id&&z);return(0,i.jsxs)(i.Fragment,{children:[d&&m?(0,i.jsx)(c.k,{prompt:m.prompt,title:m.title,url:m.url,userName:m.user.displayName}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.Z,{}),(0,i.jsxs)(s(),{children:[(0,i.jsx)("meta",{property:"og:title",content:"Free AI image generator: Art, Social Media, Marketing | Playground AI"}),(0,i.jsx)("meta",{property:"og:description",content:"Playground (official site) is a Free AI Image Generator. Use it to create art, social media posts, presentations, posters, videos, logos and more."})]})]}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:G,className:(0,g.cn)("sticky z-20 transition-all duration-100 ease-in-out bg-pg-900","down"===Q?"-top-16 max-xs:-top-11":"top-16 max-xs:top-11"),children:(0,i.jsx)(w,{activeTabId:C.id,tabs:U})}),(0,i.jsx)("div",{className:(0,g.cn)("flex flex-col gap-6 pt-2 px-4 md:px-4 pb-4"),children:(0,i.jsxs)("div",{className:"relative",children:[K&&(0,i.jsx)(B.I,{children:(0,i.jsx)(V.H,{})}),(0,i.jsx)(o.Z,{dailyTheme:j,showDailyThemeCard:"daily-theme"===C.id,className:`w-full h-full transition-all ${K?"opacity-0":""}`,initialImages:(C.id===S.id?R:D[C.id])||[],initialCursor:N[C.id],options:{url:"/api/images/feed",params:{isFeed:C.id===S.id,category:C.isCategory?C.id:null,purePrompt:C.id===A.id,tabId:C.id,model:{"playground-v2.5":"Playground_v2.5","playground-v3":"Playground_v3"}[C.id]??""}},emptyState:C.id===S.id?"My Feed shows images from people you follow. Follow people to see their images here.":"No images."},`feed-${C.id}${K?"-loading":""}`)]})})]})]})}},7109:function(e,t,r){r.d(t,{a:function(){return s}});var i=r(11163),a=r.n(i),n=r(67294);function s(e){let t=function(){let e=(0,i.useRouter)(),[t,r]=(0,n.useState)(e.asPath),[s,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{function t(t){r(e.asPath),o(t)}function i(){r(s),o(null)}return a().events.on("routeChangeStart",t),a().events.on("routeChangeComplete",i),()=>{a().events.off("routeChangeStart",t),a().events.off("routeChangeComplete",i)}},[s,e]),{currentPathname:t,nextPathname:s}}();return(0,n.useMemo)(()=>{let r="string"==typeof t.nextPathname&&t.nextPathname!==t.currentPathname,i=e.some(e=>t.currentPathname?.includes(e)),a=e.some(e=>t.nextPathname?.includes(e));return i&&a&&r},[e,t.currentPathname,t.nextPathname])}}}]);